/*!
 * Euroviz - Euroviz v<%= pkg.version 
 */
$(window).on("load",function(){function t(){$(".navbar").offset().top>50?$(".navbar-fixed-top").addClass("top-nav-collapse"):$(".navbar-fixed-top").removeClass("top-nav-collapse")}function e(){function t(t){t.each(function(t){var o=d3.select(this).append("svg"),a=o.append("g");o.attr("width",n).attr("height",r);var c=Math.min(Math.floor((r-e.top)/10),Math.floor((n-e.top)/10)),l=(n-10*c)/2,a=o.select("g").attr("transform","translate("+l+",2)");a.selectAll("rect").data(t).enter().append("rect").attr("x",function(t){return c*t.x}).attr("y",function(t){return c*t.y}).attr("height",c).attr("width",c).attr("class",function(t){return"id-"+t.countrycode}).style("fill","#aaaaaa").style("stroke",i).style("stroke-width",2),a.selectAll("text").data(t).enter().append("text").attr("x",function(t){return c*(t.x+.5)}).attr("y",function(t){return c*(t.y+.6)}).style("text-anchor","middle").style("fill","#ffffff").style("opacity",.5).style("font-size",10).style("font-family","Roboto").text(function(t){return t.countrycode})})}var e={top:2,right:0,bottom:0,left:0},n=760,r=500,o=function(t){return t[1]},a=function(t){return t[2]},i="#cccccc";return t.margin=function(n){return arguments.length?(e=n,t):e},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(r=e,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.strokecolor=function(e){return arguments.length?(i=e,t):i},t}$(window).scroll(t),$(document).ready(t),$(function(){$("a.page-scroll").bind("click",function(t){var e=$(this);$("html, body").stop().animate({scrollTop:$(e.attr("href")).offset().top},1500,"easeInOutExpo"),t.preventDefault()})}),$(".navbar-collapse ul li a").click(function(){$(".navbar-collapse").collapse("hide")});var n=document.documentElement.clientWidth;n>1e3&&(n=1e3);var r=.7,o=n*r,a={width:n,height:o,padding:10,projection:d3.geoMercator(),duration:0,key:function(t){return t.properties.ISO_A3},grid:{ALB:{x:5,y:8},ARM:{x:9,y:6},AUS:{x:9,y:9},AUT:{x:4,y:5},AZE:{x:9,y:5},BEL:{x:2,y:3},BGR:{x:7,y:6},BIH:{x:5,y:6},BLR:{x:6,y:3},CHE:{x:3,y:4},CYP:{x:8,y:7},CZE:{x:4,y:4},DEU:{x:4,y:3},DNK:{x:4,y:2},ESP:{x:1,y:5},EST:{x:6,y:1},FIN:{x:6,y:0},FRA:{x:1,y:4},GBR:{x:1,y:2},GEO:{x:8,y:5},GRC:{x:6,y:8},HUN:{x:5,y:5},HRV:{x:4,y:6},IRL:{x:0,y:2},ISL:{x:0,y:0},ISR:{x:8,y:8},ITA:{x:3,y:5},KOS:{x:6,y:7},LTU:{x:6,y:2},LUX:{x:2,y:4},LVA:{x:7,y:2},MDA:{x:7,y:5},MKD:{x:7,y:7},MLT:{x:1,y:7},MNE:{x:5,y:7},NLD:{x:3,y:3},NOR:{x:4,y:0},POL:{x:5,y:3},PRT:{x:0,y:5},ROU:{x:6,y:5},RUS:{x:7,y:3},SMR:{x:2,y:6},SRB:{x:6,y:6},SVK:{x:5,y:4},SVN:{x:3,y:6},SWE:{x:5,y:0},UKR:{x:6,y:4},TUR:{x:8,y:6}}},i=[{countrycode:"ALB",countrycode2:"al",qualifiedreal:!1,name:"Albania",round:"first",qualified:!0},{countrycode:"ARM",countrycode2:"ar",qualifiedreal:!0,name:"Armenia",round:"first",qualified:!0},{countrycode:"AUS",countrycode2:"au",qualifiedreal:!0,name:"Australia",round:"first",qualified:!0},{countrycode:"AUT",countrycode2:"at",qualifiedreal:!0,name:"Austria",round:"second",qualified:!0},{countrycode:"AZE",countrycode2:"az",qualifiedreal:!0,name:"Azerbaijan",round:"first",qualified:!0},{countrycode:"BEL",countrycode2:"be",qualifiedreal:!0,name:"Belgium",round:"first",qualified:!0},{countrycode:"BGR",countrycode2:"bg",qualifiedreal:!0,name:"Bulgaria",round:"second",qualified:!0},{countrycode:"BIH",countrycode2:"bi",qualifiedreal:!1,name:"Bosnia and Herzegovina",round:"none",qualified:!1},{countrycode:"BLR",countrycode2:"by",qualifiedreal:!0,name:"Belarus",round:"second",qualified:!1},{countrycode:"CHE",countrycode2:"ch",qualifiedreal:!1,name:"Switzerland",round:"second",qualified:!0},{countrycode:"CYP",countrycode2:"cy",qualifiedreal:!0,name:"Cyprus",round:"first",qualified:!0},{countrycode:"CZE",countrycode2:"cz",qualifiedreal:!1,name:"Czech Republic",round:"first",qualified:!1},{countrycode:"DEU",countrycode2:"de",qualifiedreal:!0,name:"Germany",round:"final",qualified:!0},{countrycode:"DNK",countrycode2:"dk",qualifiedreal:!0,name:"Denmark",round:"second",qualified:!0},{countrycode:"ESP",countrycode2:"es",qualifiedreal:!0,name:"Spain",round:"final",qualified:!0},{countrycode:"EST",countrycode2:"ee",qualifiedreal:!1,name:"Estonia",round:"second",qualified:!1},{countrycode:"FIN",countrycode2:"fi",qualifiedreal:!1,name:"Finland",round:"first",qualified:!0},{countrycode:"FRA",countrycode2:"fr",qualifiedreal:!0,name:"France",round:"final",qualified:!0},{countrycode:"GBR",countrycode2:"gb",qualifiedreal:!0,name:"Great Brittain",round:"final",qualified:!0},{countrycode:"GEO",countrycode2:"ge",qualifiedreal:!1,name:"Georgia",round:"first",qualified:!1},{countrycode:"GRC",countrycode2:"gr",qualifiedreal:!0,name:"Greece",round:"first",qualified:!0},{countrycode:"HUN",countrycode2:"hu",qualifiedreal:!0,name:"Hungary",round:"second",qualified:!0},{countrycode:"HRV",countrycode2:"hr",qualifiedreal:!0,name:"Croatia",round:"second",qualified:!0},{countrycode:"IRL",countrycode2:"ie",qualifiedreal:!1,name:"Ireland",round:"second",qualified:!0},{countrycode:"ISL",countrycode2:"is",qualifiedreal:!1,name:"Iceland",round:"first",qualified:!1},{countrycode:"ISR",countrycode2:"il",qualifiedreal:!0,name:"Israel",round:"second",qualified:!0},{countrycode:"ITA",countrycode2:"it",qualifiedreal:!0,name:"Italia",round:"final",qualified:!0},{countrycode:"KOS",countrycode2:"ko",qualifiedreal:!1,name:"Kosovo",round:"none",qualified:!1},{countrycode:"LTU",countrycode2:"lt",qualifiedreal:!1,name:"Lithuania",round:"second",qualified:!1},{countrycode:"LUX",countrycode2:"lu",qualifiedreal:!1,name:"Luxembourg",round:"none",qualified:!1},{countrycode:"LVA",countrycode2:"lv",qualifiedreal:!1,name:"Latvia",round:"first",qualified:!1},{countrycode:"MDA",countrycode2:"md",qualifiedreal:!0,name:"Moldova",round:"first",qualified:!1},{countrycode:"MKD",countrycode2:"mk",qualifiedreal:!1,name:"Macedonia",round:"second",qualified:!1},{countrycode:"MLT",countrycode2:"ml",qualifiedreal:!1,name:"Malta",round:"second",qualified:!1},{countrycode:"MNE",countrycode2:"me",qualifiedreal:!1,name:"Montenegro",round:"first",qualified:!1},{countrycode:"NLD",countrycode2:"nl",qualifiedreal:!0,name:"Netherlands",round:"second",qualified:!0},{countrycode:"NOR",countrycode2:"no",qualifiedreal:!0,name:"Norway",round:"second",qualified:!1},{countrycode:"POL",countrycode2:"pl",qualifiedreal:!0,name:"Poland",round:"first",qualified:!1},{countrycode:"PRT",countrycode2:"pt",qualifiedreal:!0,name:"Portugal",round:"first",qualified:!0},{countrycode:"ROU",countrycode2:"ro",qualifiedreal:!0,name:"Romania",round:"second",qualified:!1},{countrycode:"RUS",countrycode2:"ru",qualifiedreal:!1,name:"Russia",round:"none",qualified:!1},{countrycode:"SMR",countrycode2:"sm",qualifiedreal:!1,name:"San Marino",round:"second",qualified:!1},{countrycode:"SRB",countrycode2:"rs",qualifiedreal:!1,name:"Serbia",round:"second",qualified:!0},{countrycode:"SVK",countrycode2:"sk",qualifiedreal:!1,name:"Slovakia",round:"none",qualified:!1},{countrycode:"SVN",countrycode2:"si",qualifiedreal:!1,name:"Slovenia",round:"first",qualified:!1},{countrycode:"SWE",countrycode2:"se",qualifiedreal:!0,name:"Sweden",round:"first",qualified:!0},{countrycode:"UKR",countrycode2:"ua",qualifiedreal:!0,name:"Ukraine",round:"final",qualified:!0},{countrycode:"TUR",countrycode2:"tr",qualifiedreal:!1,name:"Turkey",round:"none",qualified:!1}],c=[],l=[],d=[],u=[],s=[],f=[],y=[];i.forEach(function(t){if("final"==t.round){var e={};e.countrycode=t.countrycode,e.name=t.name,c.push(e)}if(t.qualified||"none"==t.round||l.push(t.countrycode),t.qualifiedreal||"none"==t.round||d.push(t.countrycode),("first"==t.round||"second"==t.round)&&t.qualified){var e={};e.countrycode=t.countrycode,e.name=t.name,u.push(e)}if(("first"==t.round||"second"==t.round)&&t.qualifiedreal){var e={};e.countrycode=t.countrycode,e.name=t.name,s.push(e)}"none"==t.round&&f.push(t.countrycode),"none"!=t.round&&y.push(t.countrycode)});var p=c.concat(s);p=p.sort(function(t,e){var n=t.name,r=e.name;return n<r?-1:n>r?1:void 0}),d3.csv("data/votes_20170512.csv",function(t){d3.csv("data/peoplesvotes_20170514.csv",function(r){d3.csv("data/overallranking.csv",function(o){d3.csv("data/countrylookup.csv",function(i){function y(e,n){if("from"==n){var r=t.filter(function(t){return t.from==e&&0!=t.points});return r.sort(function(t,e){return e.points-t.points}),r}if("to"==n){var o=t.filter(function(t){return t.to==e&&0!=t.points});return o.sort(function(t,e){return t.points-e.points}),o}}function m(t,e){if("from"==e){var n=r.filter(function(e){return e.from==t&&0!=e.points});return n.sort(function(t,e){return e.points-t.points}),n}if("to"==e){var o=r.filter(function(e){return e.to==t&&0!=e.points});return o.sort(function(t,e){return t.points-e.points}),o}}function h(t){d3.selectAll("#map-three circle").interrupt(),d3.selectAll("#map-three rect").style("stroke-width",2),d3.selectAll("#map-three rect").style("fill","#7e7eb4"),p.forEach(function(t){d3.selectAll("#map-three rect.id-"+t.countrycode).style("fill","#ff5454")}),d3.selectAll("#map-three rect.nonparticipant").style("fill","#777777"),d3.selectAll("#map-three circle").remove(),d3.selectAll("#country-list li").remove(),d3.selectAll("#country-list-real li").remove(),$(".btn.btn-default.dropdown-toggle").html(v[t].name+' <span class="caret"></span>'),$(".btn.btn-default.dropdown-toggle").val($(t).data("value"));var e=y(t,"from"),n=m(t,"from"),r=O.selectAll("circle").data(e).enter().append("circle").attr("cx",T*a.grid[t].x+.5*T).attr("cy",T*a.grid[t].y+.5*T).attr("r",function(t){return t.points}).style("fill","none").style("stroke","#ffffff").style("stroke-width",2),o=O.selectAll("circle.real").data(n).enter().append("circle").attr("cx",T*a.grid[t].x+.5*T).attr("cy",T*a.grid[t].y+.5*T).attr("r",function(t){return t.points}).style("fill","none").style("stroke","#000000").style("stroke-width",2);d3.selectAll("#map-three text").raise().style("fill","#ffffff").style("opacity",.5),r.transition().ease(d3.easeExpInOut).delay(function(t,e){return 600*(10-e)}).duration(3e3).attr("cx",function(t,e){return T*a.grid[t.to].x+.5*T}).attr("cy",function(t,e){return T*a.grid[t.to].y+.5*T}).on("end",function(t,e){d3.select("#country-list").insert("li",":first-child").html('<div class="pull-left points" width="30px">'+t.points+'</div> <span class="flag-icon flag-icon-'+v[t.to].iso2+' flag-icon-squared"></span> '+v[t.to].name)}),o.transition().ease(d3.easeExpInOut).delay(function(t,e){return 600*(10-e)}).duration(3e3).attr("cx",function(t,e){return T*a.grid[t.to].x+.5*T}).attr("cy",function(t,e){return T*a.grid[t.to].y+.5*T}).on("end",function(t,e){d3.select("#country-list-real").insert("li",":first-child").html('<div class="pull-left points" width="30px">'+t.points+'</div> <span class="flag-icon flag-icon-'+v[t.to].iso2+' flag-icon-squared"></span> '+v[t.to].name)}),d3.select("#map-three rect.id-"+t).raise().transition().duration(500).style("fill","#ffffff"),d3.select("#map-three text.id-"+t).raise().transition().duration(500).style("fill","#ff5454").style("opacity",1)}function g(t){var n;"google"==t&&(n=q),"real"==t&&(n=k),n.forEach(function(t,e){var n=d3.select("div#smallmultiples");n.append("div").attr("class","row row-"+t.key);var r=d3.select(".row.row-"+t.key);r.append("h3").html(e+1+'. <span class="flag-icon flag-icon-'+v[t.key].iso2+' flag-icon-squared"></span> '+v[t.key].name);var o=r.append("div").attr("class","col-md-6 col-xs-12").append("div");o.append("h4").text("Searches: "+w[t.key]+" points"),o.append("div").attr("class","smallmultiple google "+t.key);var a=r.append("div").attr("class","col-md-6 col-xs-12").append("div");a.append("h4").text("Televoting: "+A[t.key]+" points"),a.append("div").attr("class","smallmultiple real "+t.key)});var r=e().x(function(t){return+t.x}).y(function(t){return+t.y}),o=d3.select(".smallmultiple").node().getBoundingClientRect().width;o>300&&(o=300),d3.selectAll(".smallmultiple").datum(P).call(r.width(o).height(o).strokecolor("#ffffff"));var a=d3.scaleSequential(d3.interpolateInferno).domain([14,0]);d3.selectAll(".legend-item").style("background-color",function(t){return a(d3.select(this).text())}),p.forEach(function(t){d3.selectAll(".smallmultiple."+t.countrycode+" rect.id-"+t.countrycode).raise().style("fill","#000000").style("stroke","#ffffff").style("stroke-width","6px");var e=y(t.countrycode,"to");e.forEach(function(e){d3.select(".smallmultiple.google."+t.countrycode+" rect.id-"+e.from).style("fill",a(e.points))});var n=m(t.countrycode,"to");n.forEach(function(e){d3.select(".smallmultiple.real."+t.countrycode+" rect.id-"+e.from).style("fill",a(e.points))})})}var v={},x={};i.forEach(function(t){var e={};e.name=t.name,e.iso2=t.iso2,v[t.ISO3]=e,x[t.ISO3]=0}),t.forEach(function(t){t.points=+t.points}),r.forEach(function(t){t.points=+t.points});var q=d3.nest().key(function(t){return t.to}).sortKeys(d3.ascending).rollup(function(t){return d3.sum(t,function(t){return t.points})}).entries(t);q=q.sort(function(t,e){return e.value-t.value});var k=d3.nest().key(function(t){return t.to}).sortKeys(d3.ascending).rollup(function(t){return d3.sum(t,function(t){return t.points})}).entries(r);k=k.sort(function(t,e){return e.value-t.value});var A={};k.forEach(function(t){A[t.key]=t.value});var w={};q.forEach(function(t){w[t.key]=t.value});var R=[];q.forEach(function(t,e){var n={};n.countrycode=t.key,n.googlerank=e+1,o.forEach(function(e,r){t.key==e.Country&&(n.realrank=r+1)}),R.push(n)}),$(".dropdown-menu li div").click(function(){var t=$(this).data("value");h(t)});var E=d3.select("#map-one").append("svg").attr("width",a.width).attr("height",a.height),S=d3.select("#map-two").append("svg").attr("width",a.width).attr("height",a.height),b=$("#map-three").width();b>500&&(b=500);var U=d3.select("#map-three").append("svg").attr("width",b).attr("height",b+20),L=$("#slopegraph").width(),I=L;L>400&&(I=400);var B=d3.select("#slopegraph").append("svg").attr("width",I).attr("height",700),T=Math.floor((b-4)/10),M=(b-10*T)/2,O=U.append("g").attr("transform","translate("+(2+M)+",2)");for(country in a.grid){var i=a.grid[country];O.append("rect").attr("x",T*i.x).attr("y",T*i.y).attr("height",T).attr("width",T).attr("class",function(){return"RUS"==country||"LUX"==country||"BIH"==country||"SVK"==country||"TUR"==country||"KOS"==country?"nonparticipant id-"+country:"id-"+country}).style("fill","#7e7eb4").style("stroke","#ffffff").style("stroke-width",2),O.append("text").attr("x",T*i.x+T/2).attr("y",T*i.y+T/2+4).style("fill","#ffffff").style("text-anchor","middle").style("opacity",.5).style("font-size",12).style("font-family","Roboto").attr("class",function(){return"RUS"==country||"LUX"==country||"BIH"==country||"SVK"==country||"TUR"==country||"KOS"==country?"nonparticipant id-"+country:"id-"+country}).text(country)}d3.selectAll("#map-three svg g rect:not(.nonparticipant), #map-three svg g text:not(.nonparticipant)").on("click",function(){var t=d3.select(this).attr("class").substring(3,6);h(t)});var C=d3.scaleSequential(d3.interpolatePlasma);C.domain([0,d3.max(q,function(t){return t.value})]);var K=d3.scaleLinear().domain([0,d3.max(q,function(t){return t.value})]).range([.2,1]);B.append("text").attr("x",140).attr("y",20).attr("text-anchor","middle").attr("font-size","16px").attr("font-family","Roboto").text("Search"),B.append("text").attr("x",240).attr("y",20).attr("font-size","16px").attr("text-anchor","middle").style("font-family","Roboto").text("Eurovision");var N=24;B.selectAll("line.connection").data(R).enter().append("line").attr("class",function(t){return"connection id-"+t.key}).attr("x1",150).attr("x2",230).attr("y1",function(t){return N*t.googlerank+18}).attr("y2",function(t){return N*t.realrank+18}).style("stroke",function(t){return"#eeeeee"}).style("stroke-width",2);B.selectAll("image").data(q).enter().append("image").attr("xlink:href",function(t){return"flags/round/svg/"+t.key+".svg"}).attr("x",130).attr("y",function(t,e){return 30+N*e}).attr("class",function(t){return"id-"+t.key}).attr("width",N-2).attr("height",N-2);B.selectAll("text.countrylabel").data(q).enter().append("text").attr("x",0).attr("y",function(t,e){return N*e+46}).style("font-family","Roboto").style("font-size","14px").attr("class",function(t){return"countrylabel id-"+t.key}).attr("id",function(t){return t.key}).style("fill","#000037").html(function(t,e){return e+1+". "+v[t.key].name});if(B.selectAll("image.real").data(o).enter().append("image").attr("xlink:href",function(t){return"flags/round/svg/"+t.Country+".svg"}).attr("x",230).attr("y",function(t,e){return 30+N*e}).attr("class",function(t){return"id-"+t.Country}).attr("width",N-2).attr("height",N-2),L>400){B.selectAll("text.countrylabel.real").data(o).enter().append("text").attr("x",380).attr("y",function(t,e){return N*e+46}).style("font-family","Roboto").style("font-size","14px").style("text-anchor","end").attr("class",function(t){return"countrylabel id-"+t.Country}).attr("id",function(t){return t.Country}).style("fill","#000037").style("opacity",function(t){return K(t.value)}).html(function(t,e){return e+1+". "+v[t.Country].name})}var P=[],D=[];for(country in a.grid){var i=a.grid[country],G={};G.countrycode=country,G.x=i.x,G.y=i.y,P.push(G),"KOS"!=G.countrycode&&"LUX"!=G.countrycode&&"BIH"!=G.countrycode&&"TUR"!=G.countrycode&&"SVK"!=G.countrycode&&D.push(G)}P.sort(function(t,e){var n=t.y-e.y;return 0==n?t.x-e.x:n}),$("#real-search-switch-four").change(function(){var t=this.checked;d3.select("#smallmultiples").transition().duration(500).style("opacity",0).on("end",function(){d3.select("#smallmultiples").html(""),t?(g("real"),d3.select("#smallmultiples").transition().duration(500).style("opacity",1)):(g("google"),d3.select("#smallmultiples").transition().duration(500).style("opacity",1))})}),g("google");var H=new geo2rect.draw;d3.json("./data/eurovis-countries-simplified-sanmarino.geojson",function(t,e){var r=d3.geoMercator().center([20,51]).scale(.65*n).translate([a.width/2,a.height/2]),o=d3.geoPath().projection(r),i=e.features;E.selectAll("path").data(i).enter().append("path").attr("class",function(t){return"id-"+t.properties.ISO_A3}).attr("d",o);var y={FRA:[2.456,47.155],ESP:[-3.97,40.328],DEU:[10.406,51.186],GBR:[-1.961,52.441],UKR:[33.028,48.27],TUR:[35.36,38.873],POL:[19.284,51.987],RUS:[37.531,55.714],ITA:[9.884,44.866],BLR:[27.882,53.209],ROU:[24.671,45.815]};for(country in y)var m=d3.select("#map-one svg").append("text").attr("x",r(y[country])[0]).attr("y",r(y[country])[1]).attr("class","map-one-label").text(v[country].name);var h=[30.515,50.456],g=[30.899,50.756];d3.select("#map-one svg").append("rect").attr("x",r(h)[0]).attr("y",r(h)[1]).attr("height",8).attr("width",8).style("stroke","#ffffff").style("fill","none").style("stroke-width",2),d3.select("#map-one svg").append("text").attr("x",r(g)[0]).attr("y",r(g)[1]).attr("class","map-one-label").text("KIEV").style("opacity",1).style("text-anchor","start");var x=geo2rect.compute(e);H.config=a,H.data=x,H.svg=S.append("g"),H.toggle(),H.draw(),setTimeout(function(){for(country in a.grid)var t=d3.selectAll("#map-two svg g path.id-"+country).node().getBBox(),e=d3.select("#map-two svg g path.id-"+country).node().getCTM(),n=t.x+t.width/2+e.e,r=t.y+t.height/2+e.f,o=d3.select("#map-two svg").append("text").attr("x",n).attr("y",r+4).attr("class","map-two-label").text(country)},500),H.config.duration=3e3,c.forEach(function(t){d3.selectAll("#map-one svg .id-"+t.countrycode+", #map-two svg .id-"+t.countrycode).style("fill","#dc0000")}),l.forEach(function(t){d3.selectAll("#map-one svg .id-"+t).style("fill","#7e7eb4")}),u.forEach(function(t){d3.selectAll("#map-one svg .id-"+t.countrycode+", #map-two svg .id-"+t.countrycode).style("fill","#ff5454")}),s.forEach(function(t){d3.selectAll("#map-two svg .id-"+t.countrycode).style("fill","#ff5454")}),d.forEach(function(t){d3.selectAll("#map-two svg .id-"+t).style("fill","#7e7eb4")}),p.forEach(function(t){d3.selectAll("#map-three rect.id-"+t.countrycode).style("fill","#ff5454")}),f.forEach(function(t){d3.selectAll("#map-one svg path.id-"+t+", #map-two svg path.id-"+t+", #map-three svg rect.id-"+t).style("fill","#777777")})}),$("#real-search-switch-one").change(function(){var t=$(this);t.prop("disabled",!0),setTimeout(function(){t.prop("disabled",!1)},1e3),this.checked||(u.forEach(function(t){d3.selectAll("#map-one svg .id-"+t.countrycode).transition().duration(1e3).style("fill","#ff5454")}),l.forEach(function(t){d3.selectAll("#map-one svg .id-"+t).transition().duration(1e3).style("fill","#7e7eb4")})),this.checked&&(s.forEach(function(t){d3.selectAll("#map-one svg .id-"+t.countrycode).transition().duration(1e3).style("fill","#ff5454")}),d.forEach(function(t){d3.selectAll("#map-one svg .id-"+t).transition().duration(1e3).style("fill","#7e7eb4")}))}),$("#mapswitch").change(function(){H.toggle(),H.draw();var t=$(this);t.prop("disabled",!0),setTimeout(function(){t.prop("disabled",!1)},3500),this.checked||d3.selectAll("#map-two text").transition().duration(3e3).style("opacity",.5),this.checked&&d3.selectAll("#map-two text").transition().duration(3e3).style("opacity",0)})})})})})});